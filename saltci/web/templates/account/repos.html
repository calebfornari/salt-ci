{% extends "account/layout.html" %}

{% macro render_repos_tbody(repos) %}
  <tbody>
    {% for repo in repos %}
    <tr>
      <td>{{ repo.name }}</td>
      <td>{{ repo.description }}</td>
      <td>{{ repo.private }}</td>
      <td{% if repo.private %} class="warning"{% endif %}>
        <label class="radio inline">
          <input name="active.{{ repo.id }}" type="radio" value="1"{% if repo.active %} checked{% endif %}>Yes
        </label>
        <label class="radio inline">
          <input name="active.{{ repo.id }}" type="radio" value="0"{% if not repo.active %} checked{% endif %}>No
        </label>
      </td>
    </tr>
    {% endfor %}
  </tbody>
{% endmacro %}

{% block form_contents %}
<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Private</th>
      <th>Active</th>
    </tr>
  </thead>
  {% if own_repos %}
  {{ render_repos_tbody(own_repos) }}
  {% endif %}
  {% if fork_repos %}
  <thead>
    <tr class="info">
      <th colspan="4">Forked Repositories</th>
    </tr>
  </thead>
  {{ render_repos_tbody(fork_repos) }}
  {% endif %}
  {% if org_repos %}
  <thead>
    <tr class="info">>
      <th colspan="4">Organization Repositories</th>
    </tr>
  </thead>
  {% for (org, repos) in org_repos.iteritems() %}
  <thead>
    <tr class="info">>
      <th colspan="4">{{ org }}</th>
    </tr>
  </thead>
  {{ render_repos_tbody(repos) }}
  {% endfor %}
  {% endif %}
</table>
{%- endblock %}

{% block form_actions %}
{{ form.update() }}
{{ form.sync_repos() }}
{% endblock %}
